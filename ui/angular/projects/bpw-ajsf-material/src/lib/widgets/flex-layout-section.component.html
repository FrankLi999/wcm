<div
  *ngIf="containerType === 'div'"
  [class]="options?.htmlClass || ''"
  [class.expandable]="options?.expandable && !expanded"
  [class.expanded]="options?.expandable && expanded"
>
  <label
    *ngIf="sectionTitle"
    [class]="'legend ' + (options?.labelHtmlClass || '')"
    [innerHTML]="sectionTitle"
    (click)="toggleExpanded()"
  ></label>
  <flex-layout-root-widget
    *ngIf="expanded"
    [layout]="layoutNode.items"
    [dataIndex]="dataIndex"
    [layoutIndex]="layoutIndex"
    [isFlexItem]="getFlexAttribute('is-flex')"
    [class.form-flex-column]="getFlexAttribute('flex-direction') === 'column'"
    [class.form-flex-row]="getFlexAttribute('flex-direction') === 'row'"
    [style.display]="getFlexAttribute('display')"
    [style.flex-direction]="getFlexAttribute('flex-direction')"
    [style.flex-wrap]="getFlexAttribute('flex-wrap')"
    [style.justify-content]="getFlexAttribute('justify-content')"
    [style.align-items]="getFlexAttribute('align-items')"
    [style.align-content]="getFlexAttribute('align-content')"
    [fxLayout]="getFlexAttribute('layout')"
    [fxLayoutGap]="options?.fxLayoutGap"
    [fxLayoutAlign]="options?.fxLayoutAlign"
    [attr.fxFlexFill]="options?.fxLayoutAlign"
  ></flex-layout-root-widget>
  <mat-error
    *ngIf="options?.showErrors && options?.errorMessage"
    [innerHTML]="options?.errorMessage"
  ></mat-error>
</div>

<fieldset
  *ngIf="containerType === 'fieldset'"
  [class]="options?.htmlClass || ''"
  [class.expandable]="options?.expandable && !expanded"
  [class.expanded]="options?.expandable && expanded"
  [disabled]="disabled"
>
  <legend
    *ngIf="sectionTitle"
    [class]="'legend ' + (options?.labelHtmlClass || '')"
    [innerHTML]="sectionTitle"
    (click)="toggleExpanded()"
  ></legend>
  <flex-layout-root-widget
    *ngIf="expanded"
    [layout]="layoutNode.items"
    [dataIndex]="dataIndex"
    [layoutIndex]="layoutIndex"
    [isFlexItem]="getFlexAttribute('is-flex')"
    [class.form-flex-column]="getFlexAttribute('flex-direction') === 'column'"
    [class.form-flex-row]="getFlexAttribute('flex-direction') === 'row'"
    [style.display]="getFlexAttribute('display')"
    [style.flex-direction]="getFlexAttribute('flex-direction')"
    [style.flex-wrap]="getFlexAttribute('flex-wrap')"
    [style.justify-content]="getFlexAttribute('justify-content')"
    [style.align-items]="getFlexAttribute('align-items')"
    [style.align-content]="getFlexAttribute('align-content')"
    [fxLayout]="getFlexAttribute('layout')"
    [fxLayoutGap]="options?.fxLayoutGap"
    [fxLayoutAlign]="options?.fxLayoutAlign"
    [attr.fxFlexFill]="options?.fxLayoutAlign"
  ></flex-layout-root-widget>
  <mat-error
    *ngIf="options?.showErrors && options?.errorMessage"
    [innerHTML]="options?.errorMessage"
  ></mat-error>
</fieldset>

<mat-card
  *ngIf="containerType === 'card'"
  [ngClass]="options?.htmlClass || ''"
  [class.expandable]="options?.expandable && !expanded"
  [class.expanded]="options?.expandable && expanded"
>
  <mat-card-header *ngIf="sectionTitle">
    <legend
      [class]="'legend ' + (options?.labelHtmlClass || '')"
      [innerHTML]="sectionTitle"
      (click)="toggleExpanded()"
    ></legend>
  </mat-card-header>
  <mat-card-content *ngIf="expanded">
    <fieldset [disabled]="disabled">
      <flex-layout-root-widget
        *ngIf="expanded"
        [layout]="layoutNode.items"
        [dataIndex]="dataIndex"
        [layoutIndex]="layoutIndex"
        [isFlexItem]="getFlexAttribute('is-flex')"
        [class.form-flex-column]="
          getFlexAttribute('flex-direction') === 'column'
        "
        [class.form-flex-row]="getFlexAttribute('flex-direction') === 'row'"
        [style.display]="getFlexAttribute('display')"
        [style.flex-direction]="getFlexAttribute('flex-direction')"
        [style.flex-wrap]="getFlexAttribute('flex-wrap')"
        [style.justify-content]="getFlexAttribute('justify-content')"
        [style.align-items]="getFlexAttribute('align-items')"
        [style.align-content]="getFlexAttribute('align-content')"
        [fxLayout]="getFlexAttribute('layout')"
        [fxLayoutGap]="options?.fxLayoutGap"
        [fxLayoutAlign]="options?.fxLayoutAlign"
        [attr.fxFlexFill]="options?.fxLayoutAlign"
      ></flex-layout-root-widget>
    </fieldset>
  </mat-card-content>
  <mat-card-footer>
    <mat-error
      *ngIf="options?.showErrors && options?.errorMessage"
      [innerHTML]="options?.errorMessage"
    ></mat-error>
  </mat-card-footer>
</mat-card>

<mat-expansion-panel
  *ngIf="containerType === 'expansion-panel'"
  [expanded]="expanded"
  [hideToggle]="!options?.expandable"
>
  <mat-expansion-panel-header>
    <mat-panel-title>
      <legend
        *ngIf="sectionTitle"
        [class]="options?.labelHtmlClass"
        [innerHTML]="sectionTitle"
        (click)="toggleExpanded()"
      ></legend>
    </mat-panel-title>
  </mat-expansion-panel-header>
  <fieldset [disabled]="disabled">
    <flex-layout-root-widget
      *ngIf="expanded"
      [layout]="layoutNode.items"
      [dataIndex]="dataIndex"
      [layoutIndex]="layoutIndex"
      [isFlexItem]="getFlexAttribute('is-flex')"
      [class.form-flex-column]="getFlexAttribute('flex-direction') === 'column'"
      [class.form-flex-row]="getFlexAttribute('flex-direction') === 'row'"
      [style.display]="getFlexAttribute('display')"
      [style.flex-direction]="getFlexAttribute('flex-direction')"
      [style.flex-wrap]="getFlexAttribute('flex-wrap')"
      [style.justify-content]="getFlexAttribute('justify-content')"
      [style.align-items]="getFlexAttribute('align-items')"
      [style.align-content]="getFlexAttribute('align-content')"
      [fxLayout]="getFlexAttribute('layout')"
      [fxLayoutGap]="options?.fxLayoutGap"
      [fxLayoutAlign]="options?.fxLayoutAlign"
      [attr.fxFlexFill]="options?.fxLayoutAlign"
    ></flex-layout-root-widget>
  </fieldset>
  <mat-error
    *ngIf="options?.showErrors && options?.errorMessage"
    [innerHTML]="options?.errorMessage"
  ></mat-error>
</mat-expansion-panel>
